{
  "RoleName": "SYFAnalystRole",
  "AssumeRolePolicyDocument": {
    "Version":"2012-10-17",
    "Statement":[
      {
        "Effect":"Allow",
        "Principal":{"AWS":"arn:aws:iam::111122223333:root"},
        "Action":"sts:AssumeRole",
        "Condition":{"StringEquals":{"aws:PrincipalTag/Role":"Analyst"}}
      }
    ]
  },
  "Description":"Read-only access for analysts to `nexus` data lake",
  "Policies":[
    {
      "PolicyName":"Analyst-S3-ReadOnly",
      "PolicyDocument":{
        "Version":"2012-10-17",
        "Statement":[
          {
            "Sid":"ListAndGetInAnalyticsAndCurated",
            "Effect":"Allow",
            "Action":["s3:ListBucket"],
            "Resource":"arn:aws:s3:::nexus",
            "Condition":{
              "StringLike":{"s3:prefix":["analytics-hub/*","silver-lake/*"]},
              "StringEquals":{"aws:sourceVpce":"<YOUR_VPCE_ID>"}
            }
          },
          {
            "Effect":"Allow",
            "Action":["s3:GetObject"],
            "Resource":[
              "arn:aws:s3:::nexus/analytics-hub/*",
              "arn:aws:s3:::nexus/silver-lake/*"
            ],
            "Condition":{"StringEquals":{"aws:sourceVpce":"<YOUR_VPCE_ID>"}}
          }
        ]
      }
    },
    {
      "PolicyName":"Analyst-Athena-Glue-ReadOnly",
      "PolicyDocument":{
        "Version":"2012-10-17",
        "Statement":[
          {
            "Effect":"Allow",
            "Action":[
              "athena:StartQueryExecution",
              "athena:GetQueryResults",
              "athena:GetQueryExecution",
              "athena:ListDatabases",
              "athena:ListTableMetadata"
            ],
            "Resource":"*"
          },
          {
            "Effect":"Allow",
            "Action":[
              "glue:GetDatabase",
              "glue:GetDatabases",
              "glue:GetTable",
              "glue:GetTables",
              "glue:GetPartition",
              "glue:GetPartitions"
            ],
            "Resource":[
              "arn:aws:glue:us-west-2:111122223333:catalog",
              "arn:aws:glue:us-west-2:111122223333:database/*",
              "arn:aws:glue:us-west-2:111122223333:table/*/*"
            ]
          }
        ]
      }
    },
    {
      "PolicyName":"Analyst-CloudWatch-ReadOnly",
      "PolicyDocument":{
        "Version":"2012-10-17",
        "Statement":[
          {
            "Effect":"Allow",
            "Action":[
              "logs:DescribeLogGroups",
              "logs:DescribeLogStreams",
              "logs:GetLogEvents",
              "cloudwatch:ListMetrics",
              "cloudwatch:GetMetricData"
            ],
            "Resource":"*"
          }
        ]
      }
    },
    {
      "PolicyName":"Analyst-S3-Analytics-Write",
      "PolicyDocument":{
        "Version":"2012-10-17",
        "Statement":[
          {
            "Effect":"Allow",
            "Action":["s3:PutObject"],
            "Resource":"arn:aws:s3:::nexus/analytics-hub/*",
            "Condition":{"StringEquals":{"aws:sourceVpce":"<YOUR_VPCE_ID>"}}
          }
        ]
      }
    }
  ]
}
